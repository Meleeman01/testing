<!--<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<style>
    .box {
        float: left;
        height: 5px;
        width: 5px;
//        border: 1px solid #000;
    }
</style>

<script>
    // Thanks MDN
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    function randomTimeout(element)
    {
        setTimeout(function()
        {
            var r = getRandomInt(0, 255);
            var g = getRandomInt(0, 255);
            var b = getRandomInt(0, 255);
            
            $(element).css('background-color', 'rgb('+r+','+g+','+b+')');

            randomTimeout(element);
        }, getRandomInt(100, 1000));
    }
    
    $(document).ready(function()
    {
        console.log('hi');

        var stuff = $('<div>');

        for(var i = 0; i < 10000; i++)
        {
            stuff.append('<div class="box">');
        }

        $('body').append(stuff);

        $('.box').each(function()
        {
            var that = this;

            /*
            setInterval(function()
            {
                var r = getRandomInt(0, 255);
                var g = getRandomInt(0, 255);
                var b = getRandomInt(0, 255);
                
                $(that).css('background-color', 'rgb('+r+','+g+','+b+')');
            }, getRandomInt(100, 1000));
            */

            randomTimeout(that);
        });
    });
</script>

<body>

</body>
